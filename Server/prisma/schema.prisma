generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//CHECK-IN
model check_in {
  id               Int      @id @default(autoincrement())
  usuario_id       Int
  user             User      @relation(fields: [usuario_id], references: [id])
  nome_medicamento String   @db.VarChar(100)
  duracao_semanas  Int
  data_inicio      DateTime @default(now()) @db.Date
  moedaspcadastro  Int      @default(0)
  horarios         horarios_uso[]
  @@map("check_in")
}

model horarios_uso {
  id          Int      @id @default(autoincrement())
  checkin_id  Int
  checkin     check_in @relation(fields: [checkin_id], references: [id])
  
  dia_semana  horarios_uso_dia_semana
  
  // VOLTAMOS PARA DATA/HORA (Isso salva seus dados!)
  horario     DateTime @db.Time(0) 
  
  dose        String?  @db.VarChar(50)
}

//QUIZ
model questoes {
  id               Int    @id @default(autoincrement())
  pergunta         String @db.VarChar(255)
  alternativa_a    String @db.VarChar(255)
  alternativa_b    String @db.VarChar(255)
  alternativa_c    String @db.VarChar(255)
  alternativa_d    String @db.VarChar(255)
  resposta         String @db.VarChar(255)
  explicacaocerta  String
  explicacaoerrada String
}

//CONSULTAS
model registro_consulta {
  id             Int      @id @default(autoincrement())
  usuario_id     Int
  user           User     @relation(fields: [usuario_id], references: [id])
  data_consulta  DateTime @db.Date
  anexo_consulta String   @db.VarChar(255)
  data_registro  DateTime @default(now())
  moedaspanexo   Int      @default(0)
}

enum horarios_uso_dia_semana {
  DOMINGO
  SEGUNDA
  TERCA
  QUARTA
  QUINTA
  SEXTA
  SABADO
  TODOS
}

//USER

model User {
  id             Int      @id @default(autoincrement())
  externalId     String   @unique @map("external_id")
  name           String?
  email          String?

  check_ins      check_in[] 
  registros_consulta  registro_consulta[]

  @@map ("users")
}